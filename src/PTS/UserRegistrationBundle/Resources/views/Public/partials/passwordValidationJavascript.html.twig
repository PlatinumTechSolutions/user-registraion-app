<script type="text/javascript" src="/js/jquery.complexify.js"></script>
<script type="text/javascript">

(function($) {
    var progressBar = $('#complexity-bar');

    $('#user_newPassword_first').complexify({}, function (valid, complexity) {
        progressBar.toggleClass('progress-bar-success', valid);
        progressBar.toggleClass('progress-bar-danger', !valid);
        progressBar.css({'width': complexity + '%'});
        progressBar.text(Math.round(complexity) + '%');
    });

    var password1 = document.getElementById('user_newPassword_first');
    var password2 = document.getElementById('user_newPassword_second');

    function validatePassword() {
        if (password1.value != password2.value) {
            password2.setCustomValidity("Passwords Don't Match");
        } else {
            password2.setCustomValidity('');
        }
    }

    password1.addEventListener('change', validatePassword);
    password2.addEventListener('change', validatePassword);
})(jQuery);

</script>
