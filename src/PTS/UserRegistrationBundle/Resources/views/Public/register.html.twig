{% extends 'public.html.twig' %}

{% block body %}

    <div class="container">
        <div class="card card-container">
            <img id="profile-img" class="profile-img-card" src="/images/avatar.png" />

            {% for flash_message in app.session.flashbag.get('error') %}
                <div class="alert alert-danger"><b>Error!</b> {{ flash_message }}</div>
            {% endfor %}

            <form id="form-register" class="form-signin" method="POST" action="#">
                <input name="_first_name"
                    type="text"
                    id="inputFirstName"
                    class="form-control"
                    placeholder="First Name"
                    value="{{first_name}}"
                    required
                    autofocus />
                <input name="_last_name"
                    type="text"
                    id="inputLastName"
                    class="form-control"
                    placeholder="Last Name"
                    value="{{ last_name }}"
                    required />
                <input name="_email"
                    type="email"
                    id="inputEmail"
                    class="form-control"
                    placeholder="Email"
                    value="{{ email }}"
                    required />

                <div id="password-inputs" class="form-group has-feedback">
                    <input name="_password"
                        type="password"
                        id="inputPassword"
                        class="form-control"
                        placeholder="Password"
                        required />
                    <input name="_password2"
                        type="password"
                        id="inputPassword2"
                        class="form-control"
                        placeholder="Confirm Password"
                        required />
                </div>

                Password Strength:
                <div class="progress">
                    <div id="complexity-bar" class="progress-bar" role="progressbar">0%</div>
                </div>

                <button id="register-submit" class="btn btn-lg btn-primary btn-block btn-signin" type="submit" />Register</button>
            </form>
            <div class="pull-left">
                <a href="{{ path('login_route') }}" class="form-signin-link">
                    Login
                </a>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}

<script type="text/javascript" src="/js/jquery.complexify.js"></script>
<script type="text/javascript">

(function($) {
    var progressBar = $('#complexity-bar');

    $('#inputPassword').complexify({}, function (valid, complexity) {
        progressBar.toggleClass('progress-bar-success', valid);
        progressBar.toggleClass('progress-bar-danger', !valid);
        progressBar.css({'width': complexity + '%'});
        progressBar.text(Math.round(complexity) + '%');
    });

    var password1 = document.getElementById('inputPassword');
    var password2 = document.getElementById('inputPassword2');

    function validatePassword() {
        if (password1.value != password2.value) {
            password2.setCustomValidity("Passwords Don't Match");
        } else {
            password2.setCustomValidity('');
        }
    }

    password1.addEventListener('change', validatePassword);
    password2.addEventListener('change', validatePassword);
})(jQuery);

</script>
{% endblock %}
